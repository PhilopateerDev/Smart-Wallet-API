<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Digital Wallet UI</title>
    <style>
        /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
        :root { --primary: #4f46e5; --bg: #f3f4f6; --card: #ffffff; }
        body { font-family: sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: var(--card); width: 400px; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); }
        
        /* ØªØµÙ…ÙŠÙ… Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Tabs) */
        .tabs { display: flex; justify-content: space-around; margin-bottom: 20px; border-bottom: 1px solid #ddd; }
        .tab-btn { background: none; border: none; padding: 10px; cursor: pointer; color: #666; font-weight: bold; }
        .tab-btn.active { color: var(--primary); border-bottom: 2px solid var(--primary); }
        
        /* Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù†Ø´Ø· ÙÙ‚Ø· */
        .form-section { display: none; }
        .form-section.active { display: block; }
        
        input { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button.main-btn { width: 100%; padding: 10px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; transition: 0.3s; }
        button.main-btn:hover { background: #3730a3; }
        
        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ù†Ø¬Ø§Ø­ Ø£Ùˆ Ø®Ø·Ø£) */
        #result { margin-top: 15px; padding: 10px; border-radius: 6px; display: none; text-align: center; font-weight: bold; }
        .success { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
        .error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
    </style>
</head>
<body>

<div class="container">
    <h1>Smart Wallet</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('create')">Register</button>
        <button class="tab-btn" onclick="showTab('balance')">Balance</button>
        <button class="tab-btn" onclick="showTab('deposit')">Deposit</button>
        <button class="tab-btn" onclick="showTab('transfer')">Transfer</button>
    </div>

    <div id="create" class="form-section active">
        <input type="text" id="reg-name" placeholder="Username">
        <input type="number" id="reg-balance" placeholder="Initial Balance">
        <button class="main-btn" onclick="apiCall('create-account', 'POST')">Create Account</button>
    </div>

    <div id="balance" class="form-section">
        <input type="number" id="bal-id" placeholder="Your User ID">
        <button class="main-btn" onclick="apiCall('balance')">Check Balance</button>
    </div>

    <div id="deposit" class="form-section">
        <input type="number" id="dep-id" placeholder="User ID">
        <input type="number" id="dep-amt" placeholder="Amount">
        <button class="main-btn" onclick="apiCall('deposit', 'PUT')">Deposit Funds</button>
    </div>

    <div id="transfer" class="form-section">
        <input type="number" id="tr-sender" placeholder="Sender ID">
        <input type="number" id="tr-receiver" placeholder="Receiver ID">
        <input type="number" id="tr-amt" placeholder="Amount">
        <button class="main-btn" onclick="apiCall('transfer', 'PUT')">Transfer Now</button>
    </div>

    <div id="result"></div>
</div>

<script>
    const API = "http://127.0.0.1:8000"; // Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ±

    // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    function showTab(id) {
        document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
        document.getElementById('result').style.display = 'none';
    }

    // Ø¯Ø§Ù„Ø© Ù…ÙˆØ­Ø¯Ø© Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù€ API Ø¨Ù…Ø®ØªÙ„Ù Ø§Ù„Ø·Ø±Ù‚ (GET, POST, PUT)
    async function apiCall(endpoint, method = 'GET') {
        let url = `${API}/${endpoint}`;
        let resDiv = document.getElementById('result');

        // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù€ URL ÙˆØ§Ù„Ù€ Parameters Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù†Ø´Ø·
        if(endpoint === 'create-account') {
            url += `?username=${document.getElementById('reg-name').value}&initial_balance=${document.getElementById('reg-balance').value}`;
        } else if(endpoint === 'balance') {
            url += `/${document.getElementById('bal-id').value}`;
        } else if(endpoint === 'deposit') {
            url += `?user_id=${document.getElementById('dep-id').value}&amount=${document.getElementById('dep-amt').value}`;
        } else if(endpoint === 'transfer') {
            url += `?sender_id=${document.getElementById('tr-sender').value}&receiver_id=${document.getElementById('tr-receiver').value}&amount=${document.getElementById('tr-amt').value}`;
        }

        try {
            const response = await fetch(url, { method });
            const data = await response.json();
            
            resDiv.style.display = 'block';
            resDiv.className = data.error ? 'error' : 'success';
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¯ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if(data.error) {
                resDiv.innerText = "âŒ " + data.error;
            } else if(data.balance !== undefined) {
                resDiv.innerText = `ğŸ‘¤ Hello ${data.username} | ğŸ’° Balance: $${data.balance}`;
            } else {
                resDiv.innerText = "âœ… " + data.message + (data.user_id ? ` | Your ID: ${data.user_id}` : "");
            }
        } catch(e) {
            resDiv.style.display = 'block'; resDiv.className = 'error'; resDiv.innerText = "ğŸš¨ Server is offline!";
        }
    }
</script>
</body>
</html>
